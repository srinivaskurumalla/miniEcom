<div class="relative w-full max-w-xl mx-auto">
  <!-- ðŸ” Search Input -->
  <div class="relative">
    <input
      [(ngModel)]="searchQuery"
      type="text"
      placeholder="Search products..."
      (input)="search($event)"
      (focus)="showResults(true)"
      class="w-full border border-gray-300 rounded-full py-2.5 pl-5 pr-10 text-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition outline-none"
    />

    <!-- âŒ Clear Button -->
    <button
      *ngIf="searchQuery"
      type="button"
      (click)="searchQuery = ''; search($event)"
      class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-700"
      aria-label="Clear"
    >
      âœ•
    </button>
  </div>

  <!-- ðŸŒ€ Loading Indicator -->
  <div *ngIf="loading" class="absolute left-0 right-0 bg-white shadow-lg rounded-lg mt-2 p-3 text-center text-gray-500">
    Loading...
  </div>

  <!-- ðŸ”½ Search Results Dropdown -->
  <div
    *ngIf="!loading && result().length > 0 && showResult"
    class="absolute left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-80 overflow-y-auto border border-gray-100 z-50"
  >
    @for (res of result(); track $index) {
    <div
      (mousedown)="selectItem(res)"
      class="px-4 py-2 text-gray-700 hover:bg-blue-50 cursor-pointer transition"
    >
      {{ res?.name }}
    </div>
    }
  </div>

  <!-- ðŸš« No Results -->
  <div
    *ngIf="!loading && result().length === 0 && showResult && searchQuery && !selectedItem"
    class="absolute left-0 right-0 bg-white shadow-lg rounded-lg mt-2 p-3 text-center text-gray-500"
  >
    No results found
  </div>
</div>
